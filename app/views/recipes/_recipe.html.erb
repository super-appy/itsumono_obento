<div class="xl:w-1/3 md:w-1/2 p-4">
  <div class="border border-gray-200 p-6 rounded-lg">
    <p>
      <% bookmarked_recipe = current_user.bookmarked_recipes.find_by(recipe_id: recipe.id)%>
      <% if bookmarked_recipe %>
        <%= link_to bookmarked_recipe_path(bookmarked_recipe), data: {turbo_method: :delete} do %>
          <i class="fa-solid fa-heart"></i>
        <% end %>
        <%= link_to edit_bookmarked_recipe_path(bookmarked_recipe) do %>
          <i class="fa-regular fa-square-check">作った</i>
        <% end %>
        <% if controller_name == 'bookmarked_recipes' && action_name == 'index' %>
          <%= link_to "削除", bookmarked_recipe_path(bookmarked_recipe), data: {turbo_method: :delete, turbo_confirm: '削除してもいいですか？'} %>
        <% end %>
      <% else %>
        <%= link_to bookmarked_recipes_path(recipe_id: recipe.id), data: {turbo_method: :post} do %>
          <i class="fa-regular fa-heart"></i>
        <% end %>
      <% end %>
    </p>
    <% recipe.tags.each do |tag| %>
      <%= image_tag tag.image_url, class: 'w-14 h-14 inline-flex items-center justify-center bg-indigo-100 text-indigo-500 mb-2 flex-shrink-0 ring-1 ring-gray-400 rounded-full'%>
    <% end%>
    <p>
      <%= link_to recipe.title, recipe_path(recipe), class: "text-gray-900 py-5 text-lg" %>
    </p>
    <div class= "flex mb-2">
      <div class="border-2 border-gray-200 px-1 py-1 rounded-lg flex justify-center">
        <div class="px-1 flex items-center">
          <i class="fa-solid fa-clock-rotate-left pr-2"></i>
          <h2 class="text-gray-900"><%= recipe.time_required_i18n %></h2>
        </div>
      </div>
      <div class="border-2 border-gray-200 mx-2 px-1 py-1 rounded-lg flex justify-center">
        <div class="px-1 flex items-center">
          <i class="fa-solid fa-bowl-rice pr-2"></i>
          <h2 class="text-gray-900"><%= recipe.taste_i18n %></h2>
        </div>
      </div>
    </div>
    <%# bookmarked_recipesの一覧だったらコメントを表示 %>
    <% if controller_name == 'bookmarked_recipes' && action_name == 'index' %>
      <%= bookmarked_recipe.comment%>
    <% else %>
      <%# 通常の一覧なら食材を表示する %>
      <% if recipe.api_ingredients %>
        <%# APIで生成したレシピでの表示 %>
        <%= recipe.api_ingredients %>
      <% else%>
        <%# 手動で登録したレシピの表示 %>
        <% recipe.recipe_ingredients.each_with_index do |ing, index| %>
          <span class="leading-relaxed text-base"><%= ing.name %> <%= ing.quantity %></span>
          <% unless index == recipe.recipe_ingredients.size - 1 %>
            <span class="text-gray-500"> | </span>
          <% end %>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>
